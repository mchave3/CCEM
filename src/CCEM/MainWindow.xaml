<?xml version="1.0" encoding="utf-8" ?>
<Window x:Class="CCEM.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:animations="using:CommunityToolkit.WinUI.Animations"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:dev="using:DevWinUI"
        xmlns:local="using:CCEM"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d">
    <!--  Main Content Container  -->
    <Grid x:Name="MainContentGrid">
        <!--  Main Application Shell (collapsed at startup)  -->
        <Grid x:Name="ShellRoot"
              Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <!--  Title Bar  -->
                <RowDefinition />
                <!--  Navigation Content  -->
            </Grid.RowDefinitions>

            <!--  Custom Title Bar with Search and Theme Button  -->
            <TitleBar x:Name="AppTitleBar"
                      Title="{x:Bind dev:ProcessInfoHelper.ProductName}"
                      IsBackButtonVisible="True"
                      IsPaneToggleButtonVisible="True"
                      Subtitle="{x:Bind dev:ProcessInfoHelper.VersionWithPrefix}">
                <!--  Search Box in Title Bar  -->
                <AutoSuggestBox MinWidth="320"
                                VerticalAlignment="Center"
                                PlaceholderText="Search"
                                QueryIcon="Find"
                                QuerySubmitted="OnQuerySubmitted"
                                TextChanged="OnTextChanged" />
                <!--  App Icon in Title Bar  -->
                <TitleBar.LeftHeader>
                    <ImageIcon Width="16"
                               Height="16"
                               Margin="2,0,14,0"
                               Source="ms-appx:///Assets/AppIcon.png" />
                </TitleBar.LeftHeader>
                <!--  Theme Toggle Button in Title Bar  -->
                <TitleBar.RightHeader>
                    <Button x:Name="ThemeButton"
                            Height="32"
                            Margin="0,0,4,0"
                            Click="ThemeButton_Click"
                            Content="{dev:FontIcon GlyphCode=E793,
                                                   FontSize=16}"
                            Style="{ThemeResource SubtleButtonStyle}"
                            ToolTipService.ToolTip="Toggle Theme" />
                </TitleBar.RightHeader>
            </TitleBar>

            <!--  Main Navigation View  -->
            <NavigationView x:Name="NavView"
                            Grid.Row="1"
                            IsBackButtonVisible="Collapsed"
                            IsPaneToggleButtonVisible="False"
                            ItemInvoked="NavView_ItemInvoked">
                <NavigationView.FooterMenuItems>
                    <NavigationViewItem x:Name="ExitNavItem"
                                        Content="Exit">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xF3B1;"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </NavigationView.FooterMenuItems>
                <!--  Breadcrumb Navigation Header  -->
                <NavigationView.Header>
                    <dev:BreadcrumbNavigator x:Name="BreadCrumbNav" />
                </NavigationView.Header>
                <!--  Content Frame for Page Navigation  -->
                <Frame x:Name="NavFrame" />
            </NavigationView>
        </Grid>

        <!--  Module Selection Screen (visible after splash)  -->
        <Grid x:Name="ModuleSelectionRoot"
              Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
              Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="24">
                <Button Width="200"
                        Padding="12"
                        Click="SccmButton_Click">
                    <StackPanel HorizontalAlignment="Center"
                                Spacing="8">
                        <Image Width="96"
                               Height="96"
                               Source="ms-appx:///Assets/Modules/SCCM/SccmLogo.scale-100.png"
                               Stretch="Uniform" />
                        <TextBlock HorizontalAlignment="Center"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Text="Configuration Manager" />
                    </StackPanel>
                </Button>
                <Button Width="200"
                        Padding="12"
                        Click="IntuneButton_Click">
                    <StackPanel HorizontalAlignment="Center"
                                Spacing="8">
                        <Image Width="96"
                               Height="96"
                               Source="ms-appx:///Assets/Modules/Intune/IntuneLogo.scale-100.png"
                               Stretch="Uniform" />
                        <TextBlock HorizontalAlignment="Center"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Text="Microsoft Intune" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <!--  Loading/Splash Screen (visible at startup)  -->
        <Grid x:Name="LoadingRoot"
              Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <!--  Left Spacer  -->
                <ColumnDefinition Width="Auto" />
                <!--  Center Content  -->
                <ColumnDefinition Width="*" />
                <!--  Right Spacer  -->
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <!--  Top Spacer  -->
                <RowDefinition Height="Auto" />
                <!--  Center Content  -->
                <RowDefinition Height="*" />
                <!--  Bottom Spacer  -->
            </Grid.RowDefinitions>

            <!--  Centered Logo and Title Container  -->
            <StackPanel Grid.Row="1"
                        Grid.Column="1"
                        Padding="0,20,0,20"
                        Orientation="Horizontal">
                <!--  Logo with animation  -->
                <Border Margin="0,0,20,0">
                    <animations:Explicit.Animations>
                        <animations:AnimationSet x:Name="InAnimation_Icon">
                            <animations:TranslationAnimation EasingMode="EaseOut"
                                                             From="225,0"
                                                             To="0,0"
                                                             Duration="0:0:1" />
                        </animations:AnimationSet>
                    </animations:Explicit.Animations>
                    <Image Width="96"
                           Source="ms-appx:///Assets/AppIcon.png" />
                </Border>

                <!--  Text with animation  -->
                <StackPanel VerticalAlignment="Center"
                            Orientation="Vertical">
                    <animations:Explicit.Animations>
                        <animations:AnimationSet x:Name="InAnimation_Text">
                            <animations:TranslationAnimation EasingMode="EaseOut"
                                                             From="-225,0"
                                                             To="0,0"
                                                             Duration="0:0:1" />
                            <animations:OpacityAnimation EasingMode="EaseOut"
                                                         From="0"
                                                         To="1"
                                                         Duration="0:0:1" />
                        </animations:AnimationSet>
                    </animations:Explicit.Animations>
                    <!--  App Title  -->
                    <TextBlock x:Name="AppTitle"
                               Margin="0,-10,0,-20"
                               HorizontalAlignment="Left"
                               FontFamily="Segoe UI Variable Display"
                               FontSize="90"
                               FontWeight="ExtraBlack"
                               Text="CCEM" />
                    <!--  App Subtitle  -->
                    <TextBlock HorizontalAlignment="Center"
                               FontFamily="Segoe UI Variable"
                               FontSize="20"
                               Text="Client Center for Endpoint Manager" />
                </StackPanel>
            </StackPanel>

            <!--  Loading Progress Indicator  -->
            <ProgressBar x:Name="LoadingIndicator"
                         Grid.Row="1"
                         Grid.Column="1"
                         Margin="0,0,5,0"
                         VerticalAlignment="Bottom"
                         IsIndeterminate="True"
                         Visibility="Collapsed" />
        </Grid>
    </Grid>
</Window>
